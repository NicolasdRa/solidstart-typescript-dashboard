/* DashboardSidebar CSS Module */
@import "tailwindcss" reference;

/* Main Container */
.sidebar {
  @apply shadow-lg z-40 flex flex-col;
  background-color: var(--bg-primary);
  grid-area: sidebar;
  /* Ensure stable height that adapts to container */
  height: 100%;
  min-height: 100%;
  /* Prevent layout shifts during hydration */
  contain: layout style;
  /* Force stable positioning */
  position: relative;
  /* Force layout stability during navigation */
  will-change: auto;
  backface-visibility: hidden;
  transform: translateZ(0);
  /* Prevent flex shrinking */
  flex-shrink: 0;
}

/* Desktop specific - ensure sidebar fills parent container height */
@media (min-width: 769px) {
  .sidebar {
    height: 100%;
    min-height: 100%;
    max-height: 100%;
    /* Ensure stable grid positioning */
    align-self: stretch;
  }
}

/* Mobile behavior */
@media (max-width: 768px) {
  .sidebar {
    @apply fixed left-0 top-0;
    height: 100vh !important;
    min-height: 100vh !important;
    max-height: 100vh !important;
    grid-area: none;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

.sidebarMobileOpen {
  @apply w-full translate-x-0 lg:hidden;
}

.sidebarCollapsed {
  @apply border-r;
  border-color: var(--border-color);
  /* Maintain stable height during state changes */
  height: 100%;
  min-height: 100%;
}

.sidebarExpanded {
  @apply border-r;
  border-color: var(--border-color);
  /* Maintain stable height during state changes */
  height: 100%;
  min-height: 100%;
}

/* Enhanced desktop stability */
@media (min-width: 769px) {
  .sidebar,
  .sidebarCollapsed,
  .sidebarExpanded {
    height: 100%;
    min-height: 100%;
    max-height: 100%;
    display: flex;
    flex-direction: column;
    grid-area: sidebar;
    position: relative;
    background-color: var(--bg-primary);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    border-right: 1px solid var(--border-color);
  }
}

/* Mobile-specific styles */
@media (max-width: 768px) {
  .sidebarCollapsed {
    @apply w-16 -translate-x-full;
  }

  .sidebarExpanded {
    @apply w-72 -translate-x-full;
  }
}

/* Header Section */
.header {
  @apply border-b flex-shrink-0 p-4 h-20;
  border-color: var(--border-color);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.headerMobile {
  @apply flex items-center justify-between h-full lg:hidden;
}

.headerCollapsed {
  @apply hidden lg:flex items-center justify-center h-full w-full;
}

.headerExpanded {
  @apply hidden lg:flex items-center justify-between h-full;
}

.headerContent {
  @apply flex items-center gap-3;
}

.logo {
  @apply w-10 h-10 rounded-xl flex items-center justify-center text-white text-xl font-bold;
  background-color: var(--accent-color);
}

.logoText {
  @apply text-xl font-bold leading-tight;
  color: var(--text-primary);
}

.logoSubtext {
  @apply text-sm leading-tight;
  color: var(--text-secondary);
}

.toggleButton {
  @apply p-2 rounded-lg transition-all duration-200;
  color: var(--text-muted);
}

.toggleButton:hover {
  color: var(--text-secondary);
  background-color: var(--bg-tertiary);
}

.toggleButtonCentered {
  @apply p-2 rounded-lg transition-all duration-200 items-center justify-center;
  color: var(--text-muted);
}

.toggleButtonCentered:hover {
  color: var(--text-secondary);
  background-color: var(--bg-tertiary);
}

.icon {
  @apply w-5 h-5;
}

.iconSmall {
  @apply w-4 h-4;
}

/* Navigation Section */
.nav {
  @apply flex-1 overflow-y-auto overflow-x-hidden p-4;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.navList {
  @apply space-y-2;
}

.navButton {
  @apply flex items-center rounded-lg transition-all duration-200 relative h-12 w-full no-underline;
  text-decoration: none;
}

.navButton:hover {
  background-color: var(--bg-tertiary);
}

.navButtonMobile {
  @apply gap-3 px-4;
}

.navButtonCollapsed {
  @apply px-0 justify-center;
}

.navButtonExpanded {
  @apply gap-3 px-4;
}

.navButtonActive {
  background-color: var(--color-primary-100);
  color: var(--color-primary-700);
}

.navButtonInactive {
  color: var(--text-secondary);
}

.navButtonInactive:hover {
  color: var(--text-primary);
}

.navIcon {
  @apply text-xl flex-shrink-0 w-6 text-center;
}

.navLabel {
  @apply font-medium truncate min-w-0 flex-1;
}

.tooltip {
  @apply absolute left-full ml-2 px-2 py-1 text-white text-sm rounded opacity-0 invisible transition-all duration-200 whitespace-nowrap z-50;
  background-color: var(--text-primary);
  color: var(--bg-primary);
}

.navButton:hover .tooltip {
  @apply opacity-100 visible;
}

/* User Section */
.userSection {
  @apply flex-shrink-0 border-t p-4 h-36;
  background-color: var(--bg-primary);
  border-color: var(--border-color);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.themeButton {
  @apply w-full flex items-center rounded-lg transition-all duration-200 mb-3 relative h-12 overflow-hidden;
  color: var(--text-secondary);
}

.themeButton:hover {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
}

.themeButtonMobile {
  @apply gap-3 px-4;
}

.themeButtonCollapsed {
  @apply px-0 justify-center;
}

.themeButtonExpanded {
  @apply gap-3 px-4;
}

.themeIcon {
  @apply text-xl flex-shrink-0 w-6 text-center;
}

.themeLabel {
  @apply font-medium truncate min-w-0 flex-1 text-left;
}

/* User Container */
.userContainer {
  @apply relative;
}

.userProfile {
  @apply flex items-center rounded-lg h-16 w-full transition-all duration-200 cursor-pointer text-left;
  background-color: transparent;
  border: none;
  /* Ensure proper alignment */
  justify-content: flex-start;
}

.userProfile:hover {
  background-color: var(--bg-tertiary);
  /* Subtle transform for better feedback */
  transform: translateY(-1px);
}

.userProfile:focus {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
  background-color: var(--bg-tertiary);
}

.userProfile:active {
  transform: translateY(0);
}

.userProfileActive {
  background-color: var(--bg-tertiary);
}

.userProfileMobile {
  @apply gap-3 px-4;
  /* Remove overflow-hidden to prevent text cutoff */
}

.userProfileCollapsed {
  @apply px-3;
  justify-content: center;
  /* Ensure avatar is centered when collapsed */
  position: relative;
}

.userProfileExpanded {
  @apply gap-3 px-4;
  /* Remove overflow-hidden to prevent text cutoff */
}

.userAvatar {
  @apply rounded-full flex items-center justify-center text-white font-semibold flex-shrink-0;
  background-color: var(--accent-color);
  /* Ensure consistent sizing and alignment */
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
}

.userAvatarLarge {
  @apply w-10 h-10 text-sm;
  /* Ensure font size is appropriate for the avatar size */
}

.userAvatarSmall {
  @apply w-8 h-8 text-xs;
  /* Slightly smaller font for compact view */
}

.userInfo {
  @apply flex-1 min-w-0 flex flex-col justify-center;
  /* Ensure text aligns to the left */
  text-align: left;
  line-height: 1.2;
}

.userName {
  @apply text-sm font-semibold truncate;
  color: var(--text-primary);
  margin: 0;
  /* Ensure consistent spacing */
  margin-bottom: 2px;
}

.userEmail {
  @apply text-xs truncate;
  color: var(--text-secondary);
  margin: 0;
  /* Slightly more muted for better hierarchy */
  opacity: 0.8;
}

/* User Chevron */
.userChevron {
  @apply flex-shrink-0 ml-auto pl-2;
  /* Align to the right side */
  display: flex;
  align-items: center;
}

.chevronIcon {
  @apply w-4 h-4 transition-transform duration-200;
  color: var(--text-secondary);
}

.chevronIconRotated {
  transform: rotate(180deg);
}

/* User Dropdown */
.userDropdown {
  @apply absolute bottom-full mb-2 rounded-lg shadow-lg border py-2 z-50;
  background-color: var(--bg-primary);
  border-color: var(--border-color);
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  animation: dropdownSlideUp 0.2s ease-out;
}

.userDropdownMobile {
  @apply left-4 right-4;
}

.userDropdownCollapsed {
  @apply left-0 w-64;
}

.userDropdownExpanded {
  @apply left-0 right-0;
}

.dropdownContent {
  @apply w-full;
}

.dropdownHeader {
  @apply px-4 py-3;
}

.dropdownUserInfo {
  @apply space-y-1;
  text-align: left;
}

.dropdownUserName {
  @apply text-sm font-semibold;
  color: var(--text-primary);
  margin: 0;
}

.dropdownUserId {
  @apply text-xs;
  color: var(--text-secondary);
  margin: 0;
  opacity: 0.8;
}

.dropdownDivider {
  @apply h-px my-2 mx-2;
  background-color: var(--border-color);
}

.dropdownLogoutButton {
  @apply w-full px-4 py-2 text-left flex items-center gap-3 transition-colors duration-200 hover:bg-red-50;
  color: var(--error-color);
}

.dropdownLogoutButton:disabled {
  @apply cursor-not-allowed opacity-75;
}

.dropdownLogoutButton:disabled:hover {
  background-color: transparent;
}

[data-theme="dark"] .dropdownLogoutButton:hover:not(:disabled) {
  background-color: #7f1d1d;
}

.dropdownLogoutIcon {
  @apply w-4 h-4 flex-shrink-0;
}

.dropdownLogoutText {
  @apply text-sm font-medium;
}

.logoutSpinner {
  @apply w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin;
}

/* Dropdown Animation */
@keyframes dropdownSlideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}